---
- hosts: default
  gather_facts: False
  pre_tasks:
    - raw: test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)
      register: output
      changed_when: output.stdout != ""
    - setup: # aka gather_facts
  roles:
    - role: geerlingguy.java
      java_packages:
        - "java-1.8.0-openjdk"
      when: ansible_os_family == 'RedHat'

    - role: geerlingguy.java
      when: ansible_os_family == 'Debian'

    - role: fuseki
      fuseki_configurations:
        - name: "test-db"
          read_write: true
          union_default_graph: false
